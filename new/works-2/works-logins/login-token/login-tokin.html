<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="login-token.css">
</head>
<body>
    <div class="animation-container">
        <div class="login-container">
            <h2>Login</h2>
            <form id="login-form">
                <div class="form-group">
                    <input type="text" id="username" name="username" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <input type="password" id="password" name="password" placeholder="Password" required>
                </div>
                <button type="submit">Login <span class="emoji"></span></button>
            </form>
            <p id="error-message" class="error-message"></p>
        </div>
    </div>
    <img src="/Public/Plane.png" class="custom-cursor" style="display: none;"> <!-- Imagen del avi贸n como cursor -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const planeCursor = document.querySelector('.custom-cursor');

            // Ocultamos el cursor original
            document.body.style.cursor = 'none';

            // Mostramos el cursor del avi贸n
            planeCursor.style.display = 'block';

            // Seguir el cursor con el avi贸n
            document.addEventListener('mousemove', function(e) {
                planeCursor.style.left = `${e.clientX}px`;
                planeCursor.style.top = `${e.clientY}px`;
            });
        });
        const express = require('express');
const jwt = require('jsonwebtoken');
const bcrypt = require('bcrypt');

const app = express();
const secretKey = 'mi_secreto_super_secreto';

// Mock de base de datos de usuarios
const users = [
    { id: 1, username: 'usuario1', password: '$2b$10$zfh3a5tDfl9G0hDJvqE3O.q7uKxswMcTg.N/OuyuJ5bIZccJecGWK' } // Contrase帽a: password
];

// Middleware para verificar el token en las solicitudes
function verifyToken(req, res, next) {
    const token = req.headers['authorization'];
    if (!token) return res.status(401).send('No token provided');
    jwt.verify(token.split(' ')[1], secretKey, (err, decoded) => {
        if (err) return res.status(403).send('Failed to authenticate token');
        req.userId = decoded.id;
        next();
    });
}

// Endpoint para iniciar sesi贸n y generar el token
app.post('/login', (req, res) => {
    const { username, password } = req.body;
    const user = users.find(u => u.username === username);
    if (!user) return res.status(404).send('User not found');

    // Verificar la contrase帽a
    if (!bcrypt.compareSync(password, user.password)) {
        return res.status(401).send('Incorrect password');
    }

    // Generar token
    const token = jwt.sign({ id: user.id }, secretKey, {
        expiresIn: 86400 // Expira en 24 horas
    });

    res.send({ token });
});

// Ruta protegida
app.get('/protected', verifyToken, (req, res) => {
    res.send('This is a protected route');
});

app.listen(3000, () => console.log('Server running on port 3000'));

    </script>
  </body>
</html>
